# Momster - Κοινότητα Μαμάδων
## Οδηγός Παράδοσης & Υποβολής στο Google Play

---

## Τι έγινε - Περίληψη Εργασιών

### 1. Νέα ταυτότητα εφαρμογής
- **Νέο package name**: `com.momster.community` (αντί του παλιού της Lovable)
- **Νέο όνομα**: "Momster - Κοινότητα Μαμάδων"
- Αυτά ήταν απαραίτητα γιατί το παλιό package ήταν suspended στο Google Play

### 2. Εικονίδιο εφαρμογής (Launcher Icon)
- Αντικαταστάθηκε σε **όλα τα μεγέθη** με το ροζ mascot
- Τώρα ταιριάζει απόλυτα με το εικονίδιο του Store listing
- Αυτό ήταν η **#1 αιτία απόρριψης** ("Misleading Claims" - το εικονίδιο στο κατάστημα δεν ταίριαζε με αυτό στη συσκευή)

### 3. Διόρθωση UI - Safe Area & Cropping
- Διορθώθηκαν προβλήματα όπου περιεχόμενο κοβόταν πίσω από τη bottom navigation bar
- Διορθώθηκε το κουδούνι ειδοποιήσεων που πήγαινε πίσω από τη status bar
- Διορθώθηκε το pull-to-refresh που επικαλυπτόταν με το notch
- Διορθώθηκε η σελίδα Profile όπου κείμενο κρυβόταν πίσω από το footer
- Διορθώθηκαν τα κουμπιά στη landing page που κόβονταν οριζόντια
- Όλες οι διορθώσεις λειτουργούν σε **όλες τις Android συσκευές** (προσαρμόζονται αυτόματα)

### 4. Βελτιστοποίηση εικόνων
- Τα λογότυπα βελτιστοποιήθηκαν (από ~1MB σε ~58KB το καθένα)
- Μικρότερο μέγεθος εφαρμογής, ταχύτερη φόρτωση

### 5. Καθαρισμός κώδικα
- Αφαιρέθηκαν όλα τα debug logs από τον κώδικα
- Αφαιρέθηκαν αναφορές στο παλιό Lovable project
- Αφαιρέθηκε αχρησιμοποίητος κώδικας
- Προστέθηκε ασφάλεια στο `.gitignore` για ευαίσθητα αρχεία

### 6. Επιπλέον διορθώσεις UI
- Διορθώθηκε η επικάλυψη κουδουνιού/σημαίας αναφοράς στο προφίλ άλλου χρήστη
- Διορθώθηκε το κουμπί γλώσσας στη σελίδα σύνδεσης (πήγαινε πίσω από τη status bar)
- Έλεγχος συμβατότητας με Google Play policies (πέρασε με επιτυχία)

### 7. Διορθώσεις Συμμόρφωσης Google Play (Compliance Fixes)

Η Google απαιτεί από εφαρμογές τύπου social networking να πληρούν συγκεκριμένα κριτήρια ασφάλειας χρηστών. Βρέθηκαν 3 σημεία που δεν λειτουργούσαν σωστά στο backend και διορθώθηκαν:

- **Αναφορά χρήστη στο Chat**: Πριν, όταν ένας χρήστης πάταγε "Αναφορά" στο chat, απλά εμφανιζόταν μήνυμα χωρίς να αποθηκεύεται πουθενά. Τώρα η αναφορά **καταγράφεται πραγματικά στη βάση δεδομένων**. Η Google ελέγχει ότι η αναφορά UGC (user-generated content) λειτουργεί πραγματικά, όχι μόνο εικονικά.
- **Διαγραφή λογαριασμού**: Πριν, διαγραφόταν μόνο το προφίλ αλλά ο λογαριασμός παρέμενε στο σύστημα. Τώρα γίνεται **πλήρης διαγραφή** (λογαριασμός + δεδομένα + φωτογραφίες). Η Google απαιτεί πλήρη δυνατότητα διαγραφής λογαριασμού σε όλες τις εφαρμογές. **⚠️ Απαιτεί deploy edge function - δες παρακάτω.**
- **Moderation φωτογραφιών**: Πριν, οι φωτογραφίες ανέβαιναν χωρίς καμία καταγραφή για έλεγχο. Τώρα κάθε νέα φωτογραφία **μπαίνει αυτόματα σε ουρά ελέγχου** (moderation queue). Η Google απαιτεί μηχανισμό moderation σε εφαρμογές με user-generated content.

### 8. Android Build
- Δημιουργήθηκε το **release keystore** για υπογραφή
- Δημιουργήθηκε το **AAB αρχείο** για upload στο Play Console
- Δημιουργήθηκε **debug APK** για testing στη συσκευή

---

## ΠΟΛΥ ΣΗΜΑΝΤΙΚΟ - Keystore (Κλειδί Υπογραφής)

### Τι είναι:
Το keystore είναι το **ψηφιακό κλειδί** που υπογράφει την εφαρμογή. Χωρίς αυτό, **δεν μπορείς να ανεβάσεις updates** στο Google Play.

### Στοιχεία Keystore:
| Πληροφορία | Τιμή |
|------------|-------|
| Αρχείο | `android/release.keystore` |
| Keystore password | `MomsterRelease2024!` |
| Key alias | `momster` |
| Key password | `MomsterRelease2024!` |

### Τι πρέπει να κάνεις:
1. **Κράτα αντίγραφο** του αρχείου `android/release.keystore` σε ασφαλές μέρος (Google Drive, USB stick, κλπ.)
2. **Σημείωσε τα passwords** σε ασφαλές μέρος
3. **ΜΗΝ τα χάσεις** - αν χαθεί το keystore, θα πρέπει να ανεβάσεις την εφαρμογή **από την αρχή** ως νέα, χάνοντας τις κριτικές και τα downloads
4. **Μην αλλάξεις ποτέ** το alias/password χωρίς να έχεις backup!

---

## Πριν την Υποβολή - Υποχρεωτικά Βήματα

### Βήμα 1: Ετοιμασία Λογαριασμού Google Reviewer

Αυτό είναι **κρίσιμο** - η 2η απόρριψη ήταν επειδή τα test credentials δεν λειτουργούσαν.

**Έχεις 2 επιλογές:**

#### Επιλογή Α: Χρήση του υπάρχοντος test λογαριασμού (Πιο γρήγορη)

Τον ήδη υπάρχοντα λογαριασμό:
- **Email**: `test.reviewer@momster.gr`
- **Password**: `Momster2024!`

Ο λογαριασμός αυτός υπάρχει και λειτουργεί, μπορείς να τον χρησιμοποιήσεις απευθείας. Απλά:
1. Κάνε login και βεβαιώσου ότι το **προφίλ είναι πλήρες** (φωτογραφίες, πόλη, ενδιαφέροντα, bio, στοιχεία παιδιών)
2. Αν λείπει κάτι, συμπλήρωσέ το
3. Πέρνα στο **Βήμα 2** (δημιουργία test profiles)

#### Επιλογή Β: Δημιουργία νέου λογαριασμού

Αν προτιμάς νέο λογαριασμό ή ο παραπάνω δεν λειτουργεί:
1. Άνοιξε την εφαρμογή Momster (web version)
2. Πάτα **Εγγραφή** (σαν κανονικός χρήστης)
3. Χρησιμοποίησε τα στοιχεία:
   - **Email**: Ένα email στο οποίο **έχεις πρόσβαση** (π.χ. `momster.helpdesk@gmail.com`, ή ένα νέο email που δημιουργείς εσύ)
   - **Password**: Κάτι απλό και αξιομνημόνευτο (π.χ. `MomsterReview2024!`)
   - **Όνομα**: Ρεαλιστικό ελληνικό όνομα (π.χ. `Ελένη Παπαδοπούλου`)
   > **ΣΗΜΑΝΤΙΚΟ**: Το email πρέπει να είναι πραγματικό και να έχεις πρόσβαση σε αυτό, γιατί: (1) μπορεί να χρειαστεί email verification κατά την εγγραφή, (2) ο ελεγκτής της Google μπορεί να δοκιμάσει την επιλογή "Ξέχασα τον κωδικό μου" (αν και δεν το πιστεύω)

**Και στις δύο περιπτώσεις, το προφίλ πρέπει να έχει:**
- 2-3 φωτογραφίες (μπορείς να χρησιμοποιήσεις stock photos μιας μαμάς)
- Πόλη: `Αθήνα`, Περιοχή: `Κολωνάκι`
- Ενδιαφέροντα, πληροφορίες παιδιών, bio - **συμπλήρωσε τα πάντα**
- Ολοκληρωμένο onboarding

**ΕΠΙΒΕΒΑΙΩΣΗ**: Άνοιξε ιδιωτική/incognito καρτέλα, κάνε login με τα στοιχεία που επέλεξες και βεβαιώσου ότι βλέπεις το Discover, το προφίλ και όλες τις λειτουργίες

### Βήμα 2: Δημιουργία Test Profiles

Ο ελεγκτής της Google χρειάζεται **πραγματικά προφίλ** για αλληλεπίδραση.

Αν έχεις ήδη δοκιμαστικούς χρήστες (πράγμα που προκύπτει από την συνομιλία μας στα emails) προχώρησε στο **Βήμα 3**.

Διαφορετικά, δημιούργησε 10-15 λογαριασμούς:

1. Για κάθε test profile, χρησιμοποίησε τη **κανονική Εγγραφή** με διαφορετικά emails.
2. Συμπλήρωσε πλήρως κάθε προφίλ: φωτογραφίες, πόλη (χρησιμοποίησε Αθήνα/Κολωνάκι ώστε να εμφανίζονται κοντά στον reviewer), ενδιαφέροντα, στοιχεία παιδιών
3. **Σημαντικό**: Χρησιμοποίησε ρεαλιστικά ελληνικά ονόματα - **ΟΧΙ** ονόματα που περιέχουν "test", "demo" ή "review" (η εφαρμογή τα φιλτράρει)
4. Από μερικούς λογαριασμούς, πήγαινε στο Discover και **κάνε swipe δεξιά (like)** στο προφίλ του reviewer, ώστε να μπορεί να δει matches και να ξεκινήσει chats

### Βήμα 3: Privacy Policy σε Public URL

Η πολιτική απορρήτου **πρέπει** να είναι προσβάσιμη από οποιοδήποτε browser (όχι μόνο μέσα στην εφαρμογή). Η πολιτική απορρήτου πρέπει να είναι πλήρως προσβάσιμη.

**Επιλογές:**
- Φιλοξενία σε δικό σου domain (π.χ. `https://momster.gr/privacy-policy`)
- Δημιουργία σελίδας στο Google Sites
- Δημιουργία σελίδας στο GitHub Pages

Το πλήρες κείμενο υπάρχει ήδη μέσα στην εφαρμογή - χρειάζεται απλά να αντιγραφεί σε μια δημόσια ιστοσελίδα.

---

## Ρυθμίσεις στο Google Play Console

### Δημιουργία Νέας Εφαρμογής
1. Πήγαινε στο [Google Play Console](https://play.google.com/console)
2. Πάτα **"Δημιουργία εφαρμογής"**
3. Συμπλήρωσε:
   - **Όνομα**: `Momster - Κοινότητα Μαμάδων`
   - **Γλώσσα**: Ελληνικά - el
   - **Εφαρμογή ή παιχνίδι**: Εφαρμογή
   - **Δωρεάν ή επί πληρωμή**: Δωρεάν

### Store Listing
- **Σύντομη περιγραφή**: `Γνώρισε μαμάδες στη γειτονιά σου, μοιράσου εμπειρίες, βρες φίλες!`
- **Εικονίδιο (512x512)**: Χρησιμοποίησε το `public/app-icons/icon-512.png` (το ροζ mascot)
- **Feature graphic (1024x500 pixels)**: Δημιούργησε ένα με το mascot + όνομα + ροζ φόντο. Ακριβείς διαστάσεις: 1024 x 500 px.
- **Screenshots**: Τουλάχιστον 4 screenshots από τη συσκευή

### App Content - Σημαντικές Ρυθμίσεις

| Ρύθμιση | Τι να επιλέξεις |
|---------|-----------------|
| **Privacy Policy** | Βάλε το public URL που δημιούργησες |
| **App Access** | "All or some functionality is restricted" + test credentials |
| **Διαφημίσεις** | Όχι |
| **Content Rating** | User interaction: ΝΑΙ, Location sharing: ΝΑΙ |
| **Target Audience** | **Μόνο 18+** (ΜΗΝ επιλέξεις κάτω από 18) |
| **Κατηγορία** | Social |
| **Email επικοινωνίας** | `momster.helpdesk@gmail.com` |

### Test Credentials (στο App Access)
| Πεδίο | Τιμή |
|-------|-------|
| Username/email | Το email που επέλεξες στο Βήμα 1 |
| Password | Τον κωδικό που επέλεξες στο Βήμα 1 |
| Instructions | `This is a fully set up test account. After login, you will see the main Discover screen with other profiles. You can swipe, match, and chat. The app requires users to be 18+ mothers — this test account has a complete profile pre-configured.` |

### Data Safety Form

| Τύπος Δεδομένων | Συλλέγεται | Κοινοποιείται | Σκοπός |
|-----------------|------------|--------------|--------|
| Όνομα | Ναι | Ναι (με χρήστες) | Λειτουργία app |
| Email | Ναι | Όχι | Διαχείριση λογαριασμού |
| Φωτογραφίες | Ναι | Ναι (με χρήστες) | Λειτουργία app |
| Τοποθεσία (κατά προσέγγιση) | Ναι | Ναι (πόλη/περιοχή) | Λειτουργία app |
| Μηνύματα/Chat | Ναι | Ναι (μεταξύ matched χρηστών) | Λειτουργία app |
| User-generated content | Ναι | Ναι (με χρήστες) | Λειτουργία app |

**Ασφάλεια:**
- Κρυπτογράφηση κατά τη μεταφορά: **Ναι**
- Δυνατότητα διαγραφής δεδομένων: **Ναι** (in-app request)

### Upload AAB
1. Πήγαινε στο **Release > Production**
2. Πάτα **"Create new release"**
3. Αποδέξου το Play App Signing
4. Ανέβασε το αρχείο: `android/app/build/outputs/bundle/release/app-release.aab`
5. Release notes: `Πρώτη έκδοση του Momster - Κοινότητα Μαμάδων! Βρες μαμάδες κοντά σου, κάνε match, συνομίλησε και γίνε μέλος της κοινότητας.`
6. Χώρες: **Ελλάδα** (τουλάχιστον)

---

## Checklist Πριν το Submit

- [ ] Δημιούργησα, η έχω τον λογαριασμό google reviewer με πραγματικό email και πλήρες προφίλ
- [ ] Δημιούργησα η έχω, 10+ test profiles με ρεαλιστικά στοιχεία
- [ ] Μερικά test profiles έκαναν like στο account του reviewer
- [ ] Η privacy policy είναι online σε public URL (πλήρως προσβάσιμη)
- [ ] Δοκίμασα τα test credentials σε incognito browser
- [ ] Συμπλήρωσα τη Data Safety form
- [ ] Συμπλήρωσα το Content Rating (IARC) questionnaire
- [ ] Ανέβασα screenshots και feature graphic
- [ ] Ανέβασα το AAB αρχείο
- [ ] Έβαλα τα test credentials στο App Access
- [ ] Κράτησα αντίγραφο του keystore σε ασφαλές μέρος
- [ ] Deploy edge function `delete-account` στο Supabase (σημαντικό — ή δώσε πρόσβαση στον developer)
- [ ] Επιβεβαίωσα ότι οι αναφορές/moderation αποθηκεύονται (προαιρετικό - δες Supabase Dashboard)

---

## ⚠️ Backend - Τι Πρέπει να Γίνει στο Supabase

### 1. Κάνε deploy την edge function: `delete-account` (ΣΗΜΑΝΤΙΚΟ)

Δημιουργήθηκε η edge function `supabase/functions/delete-account/index.ts` που κάνει πλήρη διαγραφή λογαριασμού (Auth user, δεδομένα, φωτογραφίες).

**Γιατί είναι σημαντικό**: Χωρίς αυτή, η διαγραφή σβήνει τα δεδομένα προφίλ αλλά ο λογαριασμός (email/password) παραμένει στο σύστημα. Αν ο ελεγκτής της Google διαγράψει τον λογαριασμό και μετά δοκιμάσει να ξανακάνει login, θα δει ότι ο λογαριασμός υπάρχει ακόμα — κάτι που μπορεί να οδηγήσει σε απόρριψη.

**Πώς γίνεται deploy** (ή δώσε μου πρόσβαση στο Supabase και μπορώ να το κάνω εγώ):
- **Lovable**: Push τον κώδικα στο GitHub → μπορεί να κάνει auto-deploy
- **Χειροκίνητα**: `supabase functions deploy delete-account`

### 2. Αναφορές & Moderation (ΔΕΝ ΧΡΕΙΑΖΕΤΑΙ ΕΝΕΡΓΕΙΑ)

Οι αναφορές χρηστών από το chat και οι φωτογραφίες αποθηκεύονται πλέον αυτόματα στη βάση δεδομένων. Ο ελεγκτής της Google θα δει ότι η λειτουργία "Αναφορά" δουλεύει — δεν χρειάζεται να κάνεις κάτι.

Αν θέλεις να δεις τα δεδομένα, μπορείς μέσω του Supabase Dashboard → Table Editor:
- **Αναφορές**: πίνακας `profile_reports`
- **Φωτογραφίες σε αναμονή**: πίνακας `photo_moderation_queue`

Αν έχεις admin πρόσβαση στην εφαρμογή (εμφανίζεται κουμπί "Admin Access" στο προφίλ σου), μπορείς επίσης να τα δεις μέσα από την εφαρμογή.

---

## Σημαντικά Αρχεία

| Αρχείο | Τι είναι |
|--------|----------|
| `android/app/build/outputs/bundle/release/app-release.aab` | Το αρχείο για upload στο Play Console |
| `android/app/build/outputs/apk/debug/app-debug.apk` | Debug APK για testing στη συσκευή |
| `public/app-icons/icon-512.png` | Εικονίδιο για το Store listing (512x512) |
| `android/release.keystore` | Κλειδί υπογραφής - **ΚΡΑΤΑ ΤΟ ΑΣΦΑΛΕΣ** |
| `supabase/functions/delete-account/index.ts` | Edge function για πλήρη διαγραφή λογαριασμού - **πρέπει deploy** |

---

## Για Μελλοντικά Updates

Αν χρειαστεί να ανεβάσεις νέα έκδοση:

1. **Θα χρειαστείς** το `android/release.keystore` και τα passwords
2. Αύξησε το `versionCode` στο `android/app/build.gradle` (π.χ. από 1 σε 2)
3. Κάνε rebuild:
   ```
   npm run build
   npx cap sync android
   cd android
   gradlew.bat bundleRelease
   ```
4. Ανέβασε το νέο AAB στο Play Console

**Με λίγα λόγια:** Αύξησε versionCode, rebuild AAB, ανέβασε νέο release — χρησιμοποίησε πάντα το ίδιο keystore.

**Χωρίς το keystore, δεν γίνεται update - μόνο νέα εφαρμογή από την αρχή!**

---

## Επικοινωνία

Για τεχνικά ζητήματα: idnewtech101@gmail.com
